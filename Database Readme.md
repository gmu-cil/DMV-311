{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Unified Database for 311\n",
    "1. Created a new schema in mysql server\n",
    "2. The box link has the folder: DMV Data and Unified Database, which has all the processed files(county-wise), the sql dump and queries"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Step 1:\n",
    "Import preprocessed data into the database. Every file has a seperate table."
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "Below are the Queries, county-wise:\n",
    "### Arlington County Data:\n",
    "CREATE TABLE `ARL_v1` (\n",
    "`Service Request ID` VARCHAR(255),  \n",
    "`Service Type` VARCHAR(255), \n",
    "`Service Description` VARCHAR(4096), \n",
    "`Organization Responsible` VARCHAR(255), \n",
    "`Date Request Opened` DATETIME, \n",
    "`Date Service Due` DATETIME, \n",
    "`Date Request Resolved` DATETIME, \n",
    "`Status` VARCHAR(255), \n",
    "`Details` VARCHAR(2048), \n",
    "`Street Address` VARCHAR(255), \n",
    "`City` VARCHAR(255), \n",
    "`State` VARCHAR(255), \n",
    "`ZipCode` INT(11), \n",
    "`Latitude` DECIMAL(11,8), \n",
    "`Longitude` DECIMAL(11,8))\n",
    "\n",
    "### Washington DC data:\n",
    "CREATE TABLE `DC_v1` (\n",
    "`Service Request ID` VARCHAR(255), \n",
    "`Service Type` VARCHAR(255), \n",
    "`Service Description` VARCHAR(4096), \n",
    "`Organization Responsible` VARCHAR(255), \n",
    "`Date Request Opened` DATETIME, \n",
    "`Date Service Due` DATETIME, \n",
    "`Date Request Resolved` DATETIME, \n",
    "`Status` VARCHAR(255), \n",
    "`Details` VARCHAR(2048), \n",
    "`Street Address` VARCHAR(255), \n",
    "`City` VARCHAR(255), \n",
    "`State` VARCHAR(255), \n",
    "`ZipCode` INT(11), \n",
    "`Latitude` DECIMAL(11,8), \n",
    "`Longitude` DECIMAL(11,8))\n",
    " \n",
    "### Montgomery County data:\n",
    "CREATE TABLE `MC_v1` (\n",
    "`Service Request ID` VARCHAR(255), \n",
    "`Service Type` VARCHAR(255), \n",
    "`Service Description` VARCHAR(4096), \n",
    "`Organization Responsible` VARCHAR(255), \n",
    "`Date Request Opened` DATETIME, \n",
    "`Date Service Due` DATETIME, \n",
    "`Date Request Resolved` DATETIME, \n",
    "`Status` VARCHAR(255), \n",
    "`Details` VARCHAR(2048), \n",
    "`Street Address` VARCHAR(255), \n",
    "`City` VARCHAR(255), \n",
    "`State` VARCHAR(255), \n",
    "`ZipCode` INT(11), \n",
    "`Latitude` DECIMAL(11,8), \n",
    "`Longitude` DECIMAL(11,8))\n",
    "\n",
    "### PG County Data\n",
    "CREATE TABLE `PG_v1` (\n",
    "`Service Request ID` VARCHAR(255),\n",
    "`Service Type` VARCHAR(255), \n",
    "`Service Description` VARCHAR(4096), \n",
    "`Organization Responsible` VARCHAR(255), \n",
    "`Date Request Opened` DATETIME, \n",
    "`Date Service Due` DATETIME, \n",
    "`Date Request Resolved` DATETIME, \n",
    "`Status` VARCHAR(255), \n",
    "`Details` VARCHAR(2048), \n",
    "`Street Address` VARCHAR(255), \n",
    "`City` VARCHAR(255), \n",
    "`State` VARCHAR(255), \n",
    "`ZipCode` INT(11), \n",
    "`Latitude` DECIMAL(11,8), \n",
    "`Longitude` DECIMAL(11,8))\n",
    "\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Now create a new table called 'DMV'\n",
    "insert tables into it one by one:\n",
    "1. SELECT * INTO dmv FROM final_311_MontgomeryCounty_MD_2019\n",
    "2. INSERT INTO dmv SELECT * FROM final_311_PrinceGeorgeCounty_MD_2019\n",
    "3. INSERT INTO dmv SELECT * FROM final_311_Washington_DC_2019\n",
    "4. INSERT INTO dmv SELECT * FROM final_MyArlington_Arlington_VA_2020\n",
    "5. ...\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### Export the new database as a dump file. "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "All the files, queries and dump are saved under  DMV Data and Unified Database folder on box: https://umd.box.com/s/wi218u7k09k8pudzupw0bkgd5st9q32k"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "   "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### DATABASE Columns For All counties:\n",
    "\n",
    "#### WASHINGTON DC DATASET\n",
    "OBJECTID, SERVICECODE, SERVICECODEDESCRIPTION, SERVICETYPECODEDESCRIPTION, ORGANIZATIONACRONYM, SERVICECALLCOUNT, ADDDATE, RESOLUTIONDATE, SERVICEDUEDATE, SERVICEORDERDATE, INSPECTIONFLAG, INSPECTIONDATE. INSPECTORNAME, SERVICEORDERSTATUS, STATUS_CODE, SERVICEREQUESTID, PRIORITY, STREETADDRESS, XCOORD, YCOORD, LATITUDE, LONGITUDE, CITY, STATE, ZIPCODE,  MARADDRESSREPOSITORYID. WARD, DETAILS (optional)\n",
    "\n",
    "#### MONTGOMERY COUNTY DATASET\n",
    "SR ID, Attached Solution (Topic), Attached Solution(Topic), Department, Opened, Status [Closed, In Progress], SR ID, City, State, Zip Code (optional)\n",
    "\n",
    "#### PG COUNTY DATASET\n",
    "Service Request #, Request Name, Agency Responsible, Date Request Opened, SLA (sla) ['CLOSED', 'OPEN', 'OVERDUE'], Request Status  [CLOSED, OPEN] , Street Address, Latitude, Longitude, Request Name, NI Area Description\n",
    "\n",
    "#### ARLINGTON COUNTY DATASET\n",
    "serviceRequestId, Description, Name, createdAt, updated_date, \"Status ,  Address, Latitude, Longitude,  source_system\n",
    "\n",
    "#### UNIFIED DATABASE COLUMNS:\n",
    "1. SERVICE REQUEST ID\n",
    "2. Service Description\n",
    "3. Service Type\n",
    "4. Organization responsible\n",
    "5. Date Request Opened\n",
    "6. Date Request Resolved\n",
    "7. Date Service Due\n",
    "8. Status\n",
    "9. Street Address\n",
    "10. Latitude\n",
    "11. Longitude\n",
    "12. CITY\n",
    "13. STATE\n",
    "14. ZIPCODE\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.8.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
